<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>114-2 åŸºç¤è§£å‰–å­¸æ•´åˆèª²ç¨‹è¡¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');

        :root {
            --fs-xs:   clamp(10px, 1.6vw, 14px);
            --fs-sm:   clamp(12px, 1.9vw, 16px);
            --fs-base: clamp(14px, 2.2vw, 19px);
            --fs-lg:   clamp(16px, 2.6vw, 22px);
            --fs-xl:   clamp(18px, 3vw,   26px);
            --fs-2xl:  clamp(20px, 3.5vw, 30px);
            --sp-sm:   clamp(8px,  1.5vw, 14px);
            --sp-md:   clamp(14px, 2.5vw, 24px);
            --sp-lg:   clamp(18px, 3vw,   32px);
            --r-card:  clamp(18px, 3vw, 28px);
            --mood-img: clamp(36px, 6vw, 60px);
            --pill-fs: clamp(11px, 1.8vw, 15px);
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            -webkit-tap-highlight-color: transparent;
            background-color: #f8fafc;
            overflow: hidden;
            font-size: var(--fs-base);
            height: 100dvh;
        }

        #swipeContainer {
            display: flex;
            transition: transform 0.35s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform;
            width: 700%;
            height: 100%;
        }

        .week-slide {
            width: calc(100% / 7);
            flex-shrink: 0;
            padding: var(--sp-md) var(--sp-md) 5rem var(--sp-md);
            box-sizing: border-box;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
        }

        .space-y-4 > * + * { margin-top: var(--sp-md); }

        header h1  { font-size: var(--fs-xl); }
        header p   { font-size: var(--fs-xs); }
        #currentWeekBadge { font-size: var(--fs-xs); }

        .week-title-emoji { font-size: var(--fs-lg); }
        .week-title-text  { font-size: var(--fs-lg); }

        .course-card {
            padding: var(--sp-md);
            border-radius: var(--r-card);
        }
        .course-card .date-label  { font-size: var(--fs-xs); }
        .course-card .course-name { font-size: var(--fs-base); }
        .course-card .teacher-name{ font-size: var(--fs-xs); }

        .exam-card { padding: var(--sp-lg); border-radius: var(--r-card); }
        .exam-card .exam-title { font-size: var(--fs-xl); }
        .exam-card .exam-sub   { font-size: var(--fs-xs); }
        .exam-card .exam-time  { font-size: var(--fs-sm); }

        .badge-lecture { background-color: #eff6ff; color: #1d4ed8; border: 1px solid #dbeafe; font-size: var(--fs-xs); }
        .badge-lab     { background-color: #f0fdf4; color: #15803d; border: 1px solid #dcfce7; font-size: var(--fs-xs); }
        .badge-exam    { background-color: #fef2f2; color: #b91c1c; border: 1px solid #fee2e2; font-size: var(--fs-xs); }

        /* Floating nav */
        #floatingNav {
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
        }
        #floatingNav.show { transform: translateY(0); }
        #floatingNav h4 { font-size: var(--fs-base); }

        .pill-btn {
            aspect-ratio: 1 / 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            font-size: var(--pill-fs);
            font-weight: 800;
            transition: all 0.2s ease;
        }

        /* Mood selector */
        .mood-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: clamp(8px, 1.5vw, 14px);
            padding: 4px 0;
        }
        .mood-btn {
            transition: all 0.2s ease;
            filter: grayscale(0.8);
            opacity: 0.4;
            aspect-ratio: 1/1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            background: none;
            border: none;
            cursor: pointer;
        }
        .mood-btn img {
            width: var(--mood-img);
            height: var(--mood-img);
            object-fit: cover;
            border-radius: clamp(6px, 1vw, 10px);
        }
        .mood-btn.active { filter: grayscale(0); opacity: 1; transform: scale(1.1); z-index: 10; }
        .mood-btn.active img { box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .mood-label {
            font-size: clamp(8px, 1.3vw, 11px);
            font-weight: bold;
            color: #64748b;
            margin-top: 3px;
            white-space: nowrap;
        }
        .mood-btn.active .mood-label { color: #1e293b; }

        /* Dots */
        .swipe-dots { display: flex; justify-content: center; gap: clamp(4px, 1vw, 8px); padding: 8px 0 0; }
        .swipe-dot {
            width: clamp(5px, 1vw, 8px);
            height: clamp(5px, 1vw, 8px);
            border-radius: 9999px;
            background: #cbd5e1;
            transition: all 0.3s ease;
        }
        .swipe-dot.active { width: clamp(14px, 2.5vw, 22px); background: #2563eb; }
        .swipe-dot.exam-dot.active { background: #ec4899; }
    </style>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="è§£å‰–èª²è¡¨">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#2563eb">
</head>
<body class="text-slate-900 flex flex-col">

<header class="flex-none sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-100" style="padding: var(--sp-sm) var(--sp-md);">
    <div class="max-w-2xl mx-auto">
        <div class="flex justify-between items-center">
            <div>
                <h1 class="font-black text-slate-800 tracking-tight">åŸºç¤è§£å‰–å­¸</h1>
                <p class="text-[10px] text-slate-400 font-bold tracking-widest uppercase">114-2 æ•´åˆèª²è¡¨</p>
            </div>
            <div id="currentWeekBadge" onclick="toggleNav()" class="bg-blue-600 text-white px-4 py-1.5 rounded-full text-xs font-black cursor-pointer select-none">ç¬¬ä¸€é€± â˜°</div>
        </div>
        <div class="swipe-dots mt-3">
            <div class="swipe-dot active" data-dot="0"></div>
            <div class="swipe-dot" data-dot="1"></div>
            <div class="swipe-dot" data-dot="2"></div>
            <div class="swipe-dot exam-dot" data-dot="3"></div>
            <div class="swipe-dot" data-dot="4"></div>
            <div class="swipe-dot exam-dot" data-dot="5"></div>
            <div class="swipe-dot exam-dot" data-dot="6"></div>
        </div>
    </div>
</header>

<main class="flex-1 overflow-hidden">
    <div style="overflow:hidden; height:100%;">
        <div id="swipeContainer">

            <!-- ç¬¬ 1 é€± -->
            <div class="week-slide space-y-4">
                <div class="flex items-center space-x-2 pb-2"><span class="week-title-emoji">ğŸ—“ï¸</span><h2 class="week-title-text font-black text-slate-700">2/23 - 2/27</h2></div>

                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w1-1">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">2/23 (ä¸€) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Pelvis and Perineum I</h3><p class="teacher-name text-slate-500 mt-1">é™³å„·å‹ è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w1-2">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">2/23 (ä¸€) 05-06 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å¯¦é©—èª²è¬›è§£</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w1-3">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">2/23 (ä¸€) 07-08 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">è€³é¼»å–‰é ­é ¸è§£å‰–å­¸</h3><p class="teacher-name text-slate-500 mt-1">é»ƒæ‰¿æ¥¨ è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w1-4">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">2/24 (äºŒ) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">çš®è†šåˆ‡å‰²</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w1-5">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">2/25 (ä¸‰) 01-02 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Spinal cord ascending tract & Sensory tract</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w1-6">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">2/25 (ä¸‰) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Spinal cord descending tract & Motor tract</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
            </div>

            <!-- ç¬¬ 2 é€± -->
            <div class="week-slide space-y-4">
                <div class="flex items-center space-x-2 pb-2"><span class="week-title-emoji">ğŸ—“ï¸</span><h2 class="week-title-text font-black text-slate-700">3/02 - 3/06</h2></div>

                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w2-1">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/02 (ä¸€) 01-02 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Cranial nerves & Nuclei</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w2-2">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/02 (ä¸€) 03-åˆ ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">é™³æ¬½æ˜¶ è€å¸« 1</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w2-3">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/03 (äºŒ) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Pelvis and Perineum II</h3><p class="teacher-name text-slate-500 mt-1">é™³å„·å‹ è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w2-4">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/04 (ä¸‰) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Pelvis and Perineum III</h3><p class="teacher-name text-slate-500 mt-1">é™³å„·å‹ è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w2-5">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/05 (å››) 01-02 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">é›¢é«”å¿ƒè‡Ÿè§£å‰–èˆ‡è‡¨åºŠçµæ§‹æ€§å¿ƒè‡Ÿç–¾ç—…çš„ç›¸é—œæ€§</h3><p class="teacher-name text-slate-500 mt-1">è˜‡å³»å¼˜ è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w2-6">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/05 (å››) 03-åˆ ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">é™³æ¬½æ˜¶ è€å¸« 2</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
            </div>

            <!-- ç¬¬ 3 é€± -->
            <div class="week-slide space-y-4">
                <div class="flex items-center space-x-2 pb-2"><span class="week-title-emoji">ğŸ—“ï¸</span><h2 class="week-title-text font-black text-slate-700">3/09 - 3/13</h2></div>

                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w3-1">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/09 (ä¸€) 01-04 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">é™³æ¬½æ˜¶ è€å¸« 3</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w3-2">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/11 (ä¸‰) 01-02 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Brainstem & Reticular formation</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w3-3">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/11 (ä¸‰) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Diencephalon & Thalamus</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w3-4">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/12 (å››) 01-04 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">é™³æ¬½æ˜¶ è€å¸« 4</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
            </div>

            <!-- ç¬¬ 4 é€± (è€ƒé€±) -->
            <div class="week-slide space-y-4">
                <div class="flex items-center space-x-2 pb-2"><span class="week-title-emoji">ğŸ”¥</span><h2 class="week-title-text font-black text-red-600">3/16 - 3/20 è€ƒé€±</h2></div>

                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w4-1">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/16 (ä¸€) 01-04 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">é™³æ¬½æ˜¶ è€å¸« 5</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-red-50 rounded-3xl border border-red-100 flex flex-col items-center exam-card" data-id="exam-1">
                    <span class="badge-exam px-3 py-1 rounded-full font-bold mb-2">ç­†è©¦</span>
                    <h3 class="exam-title font-black text-red-800">ç¬¬ä¸€æ¬¡æœŸä¸­è€ƒ</h3>
                    <p class="exam-sub text-red-500 mt-0.5">The First Examination</p>
                    <p class="exam-time text-red-600 mt-1 font-bold">3/17 (äºŒ) 03-04 ç¯€</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-red-200 w-full"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w4-2">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/18 (ä¸‰) 01-02 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Cerebellum</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w4-3">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/18 (ä¸‰) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Basal ganglion</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w4-4">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/18 (ä¸‰) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">é™³æ¬½æ˜¶ è€å¸« 6</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-red-50 rounded-3xl border border-red-100 flex flex-col items-center exam-card" data-id="exam-2">
                    <span class="badge-exam px-3 py-1 rounded-full font-bold mb-2">è·‘å°</span>
                    <h3 class="exam-title font-black text-red-800">è·‘å°è€ƒè©¦</h3>
                    <p class="exam-time text-red-600 mt-1 font-bold">3/19 (å››) 07-08 ç¯€</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-red-200 w-full"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w4-5">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/20 (äº”) 01-02 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å¯¦é©—èª²è¬›è§£</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w4-6">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/20 (äº”) 03-04 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">çš®è†šåˆ‡å‰²</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
            </div>

            <!-- ç¬¬ 5 é€± -->
            <div class="week-slide space-y-4">
                <div class="flex items-center space-x-2 pb-2"><span class="week-title-emoji">ğŸ—“ï¸</span><h2 class="week-title-text font-black text-slate-700">3/23 - 3/27</h2></div>

                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w5-1">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/23 (ä¸€) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å»–æ™ºå‡± è€å¸« 1</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w5-2">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/24 (äºŒ) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">è…¹èƒƒç›†è…”èˆ‡æœƒé™°éƒ¨é†«å­¸å½±åƒå­¸</h3><p class="teacher-name text-slate-500 mt-1">æ¢è€•ç¶­ è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w5-3">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/24 (äºŒ) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å»–æ™ºå‡± è€å¸« 2</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w5-4">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/25 (ä¸‰) 01-02 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Cerebral cortex & White matter</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w5-5">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/25 (ä¸‰) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">Limbic system & High cortical function</h3><p class="teacher-name text-slate-500 mt-1">æ›¾å•Ÿè‚² è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w5-6">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/27 (äº”) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å»–æ™ºå‡± è€å¸« 3</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
            </div>

            <!-- ç¬¬ 6 é€± (è€ƒé€±) -->
            <div class="week-slide space-y-4">
                <div class="flex items-center space-x-2 pb-2"><span class="week-title-emoji">ğŸ”¥</span><h2 class="week-title-text font-black text-red-600">3/30 - 4/03 è€ƒé€±</h2></div>

                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w6-1">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-blue-600">3/31 (äºŒ) 03-04 ç¯€</span><span class="badge-lecture px-2.5 py-1 rounded-full font-bold">æ­£èª²</span></div>
                    <h3 class="course-name font-bold text-slate-800">ä¸­æ¨ç¥ç¶“ç³»çµ±é†«å­¸å½±åƒå­¸</h3><p class="teacher-name text-slate-500 mt-1">æ²ˆæ˜­è«­ è€å¸«</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w6-2">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">3/31 (äºŒ) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å»–æ™ºå‡± è€å¸« 4</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-red-50 rounded-3xl border border-red-100 flex flex-col items-center exam-card" data-id="exam-3">
                    <span class="badge-exam px-3 py-1 rounded-full font-bold mb-2">ç­†è©¦</span>
                    <h3 class="exam-title font-black text-red-800">ç¬¬äºŒæ¬¡æœŸä¸­è€ƒ</h3>
                    <p class="exam-sub text-red-500 mt-0.5">The Second Examination</p>
                    <p class="exam-time text-red-600 mt-1 font-bold">4/01 (ä¸‰) 03-04 ç¯€</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-red-200 w-full"></div>
                </div>
            </div>

            <!-- ç¬¬ 7 é€± (çµæ¥­é€±) -->
            <div class="week-slide space-y-4">
                <div class="flex items-center space-x-2 pb-2"><span class="week-title-emoji">ğŸ</span><h2 class="week-title-text font-black text-slate-700">4/06 - 4/10 çµæ¥­é€±</h2></div>

                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w7-1">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">4/07 (äºŒ) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å»–æ™ºå‡± è€å¸« 5</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-white rounded-3xl border border-slate-100 shadow-sm" data-id="w7-2">
                    <div class="flex justify-between items-start mb-2"><span class="date-label font-bold text-green-600">4/09 (å››) 05-08 ç¯€</span><span class="badge-lab px-2.5 py-1 rounded-full font-bold">å¯¦é©—</span></div>
                    <h3 class="course-name font-bold text-slate-800">å»–æ™ºå‡± è€å¸« 6</h3>
                    <div class="mood-selector mt-4 pt-4 border-t border-slate-50"></div>
                </div>
                <div class="course-card bg-red-50 rounded-3xl border border-red-100 flex flex-col items-center exam-card" data-id="exam-4">
                    <span class="badge-exam px-3 py-1 rounded-full font-bold mb-2">è·‘å°</span>
                    <h3 class="exam-title font-black text-red-800">æœŸæœ«è·‘å°è€ƒè©¦</h3>
                    <p class="exam-time text-red-600 mt-1 font-bold">4/10 (äº”) 07-08 ç¯€</p>
                    <div class="mood-selector mt-4 pt-4 border-t border-red-200 w-full"></div>
                </div>
            </div>

        </div>
    </div>
</main>

<nav id="floatingNav" class="fixed bottom-0 left-0 right-0 border-t border-slate-200 z-50" style="border-radius: clamp(20px,4vw,40px) clamp(20px,4vw,40px) 0 0; padding: var(--sp-md) var(--sp-md) clamp(24px,5vw,48px);">
    <div class="max-w-2xl mx-auto">
        <div class="flex justify-between items-center mb-6 px-2">
            <h4 class="font-black text-slate-800">åˆ‡æ›é€±æ¬¡</h4>
            <div class="w-10 h-1 bg-slate-200 rounded-full"></div>
        </div>
        <div style="display:grid; grid-template-columns: repeat(7, 1fr); gap: 8px;">
            <button onclick="goToWeek(0,event)" data-week="0" class="tab-btn pill-btn bg-blue-600 text-white shadow-lg">W1</button>
            <button onclick="goToWeek(1,event)" data-week="1" class="tab-btn pill-btn bg-slate-100 text-slate-500">W2</button>
            <button onclick="goToWeek(2,event)" data-week="2" class="tab-btn pill-btn bg-slate-100 text-slate-500">W3</button>
            <button onclick="goToWeek(3,event)" data-week="3" class="tab-btn pill-btn" style="background-color:#fce7f3;color:#9d174d;">W4</button>
            <button onclick="goToWeek(4,event)" data-week="4" class="tab-btn pill-btn bg-slate-100 text-slate-500">W5</button>
            <button onclick="goToWeek(5,event)" data-week="5" class="tab-btn pill-btn" style="background-color:#fce7f3;color:#9d174d;">W6</button>
            <button onclick="goToWeek(6,event)" data-week="6" class="tab-btn pill-btn" style="background-color:#fce7f3;color:#9d174d;">W7</button>
        </div>
    </div>
</nav>

<script>
    const MOOD_OPTIONS = [
        { type: 'happy',      label: 'é–‹å¿ƒ',    img: 'https://stickershop.line-scdn.net/stickershop/v1/sticker/693942/android/sticker.png' },
        { type: 'tired',      label: 'ä¸æƒ³èµ·åºŠ', img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQPtPS8QrNPCzV-tMoBX2wgUzGWWCAYDSfblg&s' },
        { type: 'sad',        label: 'é›£é',    img: 'https://p3-pc-sign.douyinpic.com/tos-cn-i-0813c001/o4zBcffHBAS7DFAIA0eEA0EG9BjFEWEjQMcwAB~tplv-dy-aweme-images:q75.webp?biz_tag=aweme_images&from=327834062&lk3s=138a59ce&s=PackSourceEnum_SEARCH&sc=image&se=false&x-expires=1774173600&x-signature=HznAwiNOmDgutVsi2Nvu4ZxlMZ4%3D' },
        { type: 'confused',   label: 'è½ä¸æ‡‚',  img: 'https://i.ytimg.com/vi/UDCa4Y2fLo8/sddefault.jpg' },
        { type: 'daze',       label: 'æˆ‘åœ¨ç™¼å‘†', img: 'https://stickershop.line-scdn.net/stickershop/v1/product/14693748/LINEStorePC/main.png?v=1' },
        { type: 'smart',      label: 'å¥½è°æ˜',  img: 'https://stickershop.line-scdn.net/stickershop/v1/sticker/179854878/android/sticker.png' },
        { type: 'future',     label: 'æœªä¾†åœ¨å“ª', img: 'https://image1.gamme.com.tw/news2/2025/47/1/qaCSzqbKw6Wep6OdkZ2dlo3Y1d4.webp' },
        { type: 'relief',     label: 'å¿«è§£è„«äº†', img: 'https://scontent.frmq3-4.fna.fbcdn.net/v/t39.30808-6/617070902_1330031945834704_1207622264570357813_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=7b2446&_nc_ohc=VhATYE3EfBIQ7kNvwGe3CDl&_nc_oc=AdmpdPmtTUdZ7DIgHjq81EaZxUkXzMo8Cv4JOIcvpShaAQUQSbz92k27sF4r34-QL10LQRmuS1VTRFXGkkwC6Qqn&_nc_zt=23&_nc_ht=scontent.frmq3-4.fna&_nc_gid=7jpx1amw_BQWg_66Xj2n9g&oh=00_Afu_sk2n_qV_NqDy0zJMPrTp4WO7MQsgvhRXiYGOcrHMlA&oe=699F831C' },
        { type: 'involution', label: 'ç¨è‡ªå…§å·', img: 'https://cdn.sonyselect.com.cn/Hi-Res-5/flacs_20250414/Cover/ANXX01292B00Z_512.jpg' },
        { type: 'none',       label: '...',     img: 'https://cdn2.ettoday.net/images/8158/e8158957.jpg' }
    ];

    const EXAM_WEEKS = [3, 5, 6];
    const weekNames = ["ç¬¬ä¸€é€±","ç¬¬äºŒé€±","ç¬¬ä¸‰é€±","ç¬¬å››é€± (è€ƒ)","ç¬¬äº”é€±","ç¬¬å…­é€± (è€ƒ)","ç¬¬ä¸ƒé€± (çµæ¥­)"];
    const nav = document.getElementById('floatingNav');
    const swipeContainer = document.getElementById('swipeContainer');
    let currentWeek = 0;

    window.onload = () => { renderAllMoodSelectors(); loadMoods(); initSwipe(); };

    function renderAllMoodSelectors() {
        document.querySelectorAll('.mood-selector').forEach(container => {
            const courseId = container.closest('.course-card').dataset.id;
            MOOD_OPTIONS.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'mood-btn';
                btn.dataset.moodType = opt.type;
                btn.onclick = (e) => toggleMood(courseId, opt.type, e);
                btn.innerHTML = `<img src="${opt.img}" alt="${opt.label}"><span class="mood-label">${opt.label}</span>`;
                container.appendChild(btn);
            });
        });
    }

    function initSwipe() {
        let touchStartX = 0, touchStartY = 0, dragX = 0;
        let swipeDirection = null;

        function attachSlideSwipe(slide) {
            slide.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                dragX = 0;
                swipeDirection = null;
                swipeContainer.style.transition = 'none';
            }, { passive: true });

            slide.addEventListener('touchmove', (e) => {
                const dx = e.touches[0].clientX - touchStartX;
                const dy = e.touches[0].clientY - touchStartY;

                if (!swipeDirection && (Math.abs(dx) > 6 || Math.abs(dy) > 6)) {
                    swipeDirection = Math.abs(dx) > Math.abs(dy) ? 'h' : 'v';
                }

                if (swipeDirection === 'h') {
                    e.preventDefault();
                    dragX = dx;
                    const base = -currentWeek * (100 / 7);
                    swipeContainer.style.transform = `translateX(calc(${base}% + ${dx}px))`;
                }
                // vertical: let the slide's own overflow-y handle it naturally
            }, { passive: false });

            slide.addEventListener('touchend', () => {
                swipeContainer.style.transition = '';
                if (swipeDirection === 'h') {
                    const threshold = window.innerWidth * 0.25;
                    if (dragX < -threshold && currentWeek < 6) goToWeek(currentWeek + 1);
                    else if (dragX > threshold && currentWeek > 0) goToWeek(currentWeek - 1);
                    else goToWeek(currentWeek);
                }
                dragX = 0;
                swipeDirection = null;
            }, { passive: true });
        }

        document.querySelectorAll('.week-slide').forEach(attachSlideSwipe);

        // Desktop mouse swipe on main
        const main = document.querySelector('main');
        let mouseStartX = 0, mouseDown = false, wasDragging = false;
        main.addEventListener('mousedown', (e) => { mouseStartX = e.clientX; mouseDown = true; wasDragging = false; swipeContainer.style.transition = 'none'; });
        main.addEventListener('mousemove', (e) => {
            if (!mouseDown) return;
            const dx = e.clientX - mouseStartX;
            if (Math.abs(dx) > 5) wasDragging = true;
            const base = -currentWeek * (100 / 7);
            swipeContainer.style.transform = `translateX(calc(${base}% + ${dx}px))`;
        });
        main.addEventListener('mouseup', (e) => {
            if (!mouseDown) return;
            mouseDown = false;
            swipeContainer.style.transition = '';
            const dx = e.clientX - mouseStartX;
            const threshold = window.innerWidth * 0.15;
            if (dx < -threshold && currentWeek < 6) goToWeek(currentWeek + 1);
            else if (dx > threshold && currentWeek > 0) goToWeek(currentWeek - 1);
            else goToWeek(currentWeek);
        });
        main.addEventListener('mouseleave', () => { if (mouseDown) { mouseDown = false; swipeContainer.style.transition = ''; goToWeek(currentWeek); } });
        main.addEventListener('click', (e) => { if (wasDragging) { e.stopPropagation(); wasDragging = false; } });
    }

    function goToWeek(idx, e) {
        if (e) e.stopPropagation();
        currentWeek = idx;

        swipeContainer.style.transition = 'transform 0.35s cubic-bezier(0.16, 1, 0.3, 1)';
        swipeContainer.style.transform = `translateX(${-(idx * (100 / 7))}%)`;

        document.querySelectorAll('.swipe-dot').forEach((d, i) => d.classList.toggle('active', i === idx));

        const badge = document.getElementById('currentWeekBadge');
        badge.textContent = weekNames[idx] + ' â˜°';
        badge.style.backgroundColor = EXAM_WEEKS.includes(idx) ? '#ec4899' : '#2563eb';

        document.querySelectorAll('.tab-btn').forEach(b => {
            const w = parseInt(b.dataset.week);
            b.classList.remove('bg-blue-600','text-white','shadow-lg','bg-slate-100','text-slate-500');
            b.style.backgroundColor = ''; b.style.color = ''; b.style.boxShadow = '';
            if (w === idx) {
                if (EXAM_WEEKS.includes(w)) { b.style.backgroundColor='#ec4899'; b.style.color='#fff'; b.style.boxShadow='0 4px 12px rgba(236,72,153,0.4)'; }
                else b.classList.add('bg-blue-600','text-white','shadow-lg');
            } else {
                if (EXAM_WEEKS.includes(w)) { b.style.backgroundColor='#fce7f3'; b.style.color='#9d174d'; }
                else b.classList.add('bg-slate-100','text-slate-500');
            }
        });

        // Scroll active slide back to top
        const activeSlide = document.querySelectorAll('.week-slide')[idx];
        if (activeSlide) activeSlide.scrollTop = 0;

        nav.classList.remove('show');
    }

    function toggleNav() {
        nav.classList.toggle('show');
    }

    function toggleMood(courseId, moodType, e) {
        e.stopPropagation();
        const card = document.querySelector(`[data-id="${courseId}"]`);
        const btn = card.querySelector(`[data-mood-type="${moodType}"]`);
        btn.classList.toggle('active');
        const key = 'anatomy_multi_mood_storage';
        const data = JSON.parse(localStorage.getItem(key) || '{}');
        if (!data[courseId]) data[courseId] = [];
        if (btn.classList.contains('active')) { if (!data[courseId].includes(moodType)) data[courseId].push(moodType); }
        else data[courseId] = data[courseId].filter(m => m !== moodType);
        localStorage.setItem(key, JSON.stringify(data));
        if (navigator.vibrate) navigator.vibrate(10);
    }

    function loadMoods() {
        const data = JSON.parse(localStorage.getItem('anatomy_multi_mood_storage') || '{}');
        Object.keys(data).forEach(id => {
            const card = document.querySelector(`[data-id="${id}"]`);
            if (card) data[id].forEach(t => card.querySelector(`[data-mood-type="${t}"]`)?.classList.add('active'));
        });
    }
</script>

<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/anatomy-schedule/sw.js', {scope: '/anatomy-schedule/'});
        });
    }
</script>
</body>
</html>
